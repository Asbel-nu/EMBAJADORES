<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cafeter√≠a | Pedidos</title>
  <style>
    /* === Paleta c√°lida === */
    :root{
      --bg:#fff5f0;
      --header:#f4c095;
      --accent:#d67e4b;
      --card:#fff1e8;
      --text:#4a3c31;
      --borde:#e6cfc1;
      --btn:#d67e4b;
      --btn-hover:#c76a3d;
    }
    *{box-sizing:border-box; margin:0; padding:0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;}
    body{background:var(--bg); color:var(--text); min-height:100vh; display:flex; flex-direction:column;}
    header{background:var(--header); padding:20px 16px; text-align:center; box-shadow:0 4px 10px #00000020;}
    header h1{font-size:2rem;}
    nav{margin-top:12px; display:flex; justify-content:center; gap:10px; flex-wrap:wrap;}
    .tab-btn{padding:10px 16px; border:none; border-radius:12px; cursor:pointer; background:#fff8f5; color:var(--text); box-shadow:0 2px 6px #00000010; transition:.3s;}
    .tab-btn.active{background:var(--accent); color:#fff; box-shadow:0 4px 12px #00000020;}
    main.wrap{max-width:1100px; margin:20px auto; width:90%; flex:1;}
    /* === Grid Productos === */
    .grid{display:grid; gap:18px;}
    .menu-grid{grid-template-columns: repeat(auto-fit,minmax(220px,1fr));}
    .card{background:var(--card); border-radius:20px; padding:16px; box-shadow:0 8px 20px #00000010; transition:.3s;}
    .card:hover{transform: translateY(-4px);}
    .category{font-weight:700; margin-bottom:8px; font-size:1.1rem;}
    .item{display:flex; justify-content:space-between; align-items:center; padding:8px 0; border-bottom:1px dashed var(--borde);}
    .item:last-child{border-bottom:0;}
    .item-name small{opacity:.7; font-size:.85rem;}
    .controls{display:flex; align-items:center; gap:6px;}
    .qty{width:50px; padding:6px; border-radius:10px; border:1px solid var(--borde);}
    .add{background:var(--btn); border:none; padding:6px 12px; border-radius:12px; cursor:pointer; color:#fff; transition:.2s;}
    .add:hover{background:var(--btn-hover);}
    /* Carrito */
    #cart{margin-bottom:10px;}
    .cart-row{display:flex; justify-content:space-between; padding:6px 0; border-bottom:1px dotted var(--borde);}
    .muted{opacity:.7;}
    label{display:block; margin:6px 0 3px;}
    input, select, textarea{width:100%; padding:10px 12px; border-radius:12px; border:1px solid var(--borde);}
    textarea{min-height:60px;}
    .submit{margin-top:10px; background:var(--btn); color:#fff; border:none; padding:12px; border-radius:16px; cursor:pointer; transition:.2s; width:100%;}
    .submit:hover{background:var(--btn-hover);}
    footer{padding:16px; text-align:center; font-size:.9rem; opacity:.8;}
  </style>
</head>
<body>
  <header>
    <h1>‚òïüç™ Cafeter√≠a | Pedidos </h1>
    <nav>
      <button class="tab-btn active" data-tab="hacer">Hacer pedido</button>
    </nav>
  </header>

  <main class="wrap">
    <!-- Hacer pedido -->
    <section id="tab-hacer" class="grid" style="grid-template-columns:2fr 1fr; gap:20px;">
      <!-- Men√∫ -->
      <div class="card">
        <h2>Men√∫</h2>
        <div class="grid menu-grid">
          <!-- Bebidas calientes -->
          <div class="card">
            <div class="category">Bebidas calientes</div>
            <div class="item">
              <div class="item-name">CAF√â</div>
              <div class="controls"><span>Q3</span><input class="qty" type="number" min="0" value="0" data-name="Caf√©" data-price="3"><button class="add">A√±adir</button></div>
            </div>
            <div class="item">
              <div class="item-name">CHOCOLATE</div>
              <div class="controls"><span>Q5</span><input class="qty" type="number" min="0" value="0" data-name="Chocolate" data-price="5"><button class="add">A√±adir</button></div>
            </div>
          </div>

          <!-- Bebidas fr√≠as -->
          <div class="card">
            <div class="category">Bebidas fr√≠as</div>
            <div class="item">
              <div class="item-name">JAMAICA <small>natural</small></div>
              <div class="controls"><span>Q5</span><input class="qty" type="number" min="0" value="0" data-name="Jamaica" data-price="5"><button class="add">A√±adir</button></div>
            </div>
            <div class="item">
              <div class="item-name">COCA COLA</div>
              <div class="controls"><span>Q5</span><input class="qty" type="number" min="0" value="0" data-name="CocaCola" data-price="5"><button class="add">A√±adir</button></div>
            </div>
          </div>

          <!-- Degustaciones -->
          <div class="card">
            <div class="category">Degustaciones</div>
            <div class="item">
              <div class="item-name">PORCION DE TICUCUS</div>
              <div class="controls"><span>Q8</span><input class="qty" type="number" min="0" value="0" data-name="Ticucus" data-price="8"><button class="add">A√±adir</button></div>
            </div>
            <div class="item">
              <div class="item-name">TOSTADAS CON CHOAMIN</div>
              <div class="controls"><span>Q5</span><input class="qty" type="number" min="0" value="0" data-name="TostadasChoamin" data-price="5"><button class="add">A√±adir</button></div>
            </div>
            <div class="item">
              <div class="item-name">NACHOS CON CARNE MOLIDA</div>
              <div class="controls"><span>Q10</span><input class="qty" type="number" min="0" value="0" data-name="NachosCarne" data-price="10"><button class="add">A√±adir</button></div>
            </div>
          </div>

          <!-- Postres -->
          <div class="card">
            <div class="category">Postres</div>
            <div class="item">
              <div class="item-name">DONAS</div>
              <div class="controls"><span>Q8</span><input class="qty" type="number" min="0" value="0" data-name="Donas" data-price="8"><button class="add">A√±adir</button></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Carrito + Formulario -->
      <div class="card">
        <h2>Tu pedido</h2>
        <div id="cart"><p class="muted">A√±ade productos del men√∫.</p></div>
        <div class="cart-row"><span class="muted">Subtotal</span><strong id="subtotal">Q0.00</strong></div>
        <div class="cart-row"><span class="muted">Total</span><strong id="total">Q0.00</strong></div>
        <hr>
        <!-- Formspree Form -->
        <form id="order-form" action="https://formspree.io/f/xeozwejo" method="POST">
          <label>Nombre del cliente</label>
          <input name="cliente" id="customer" type="text" placeholder="Tu nombre" required>
          
          <label>M√©todo</label>
          <select name="metodo" id="method">
            <option value="Mesa">Mesa</option>
            <option value="Entrega">Entrega</option>
            <option value="Recoger">Recoger</option>
          </select>
          <label id="extra-label">Mesa / Detalle</label>
          <input name="extra" id="extra" type="text" placeholder="Ej. Mesa 4">
          <label>Notas</label>
          <textarea name="notas" id="notes" placeholder=""></textarea>
          <input type="hidden" name="detalle" id="detalle-form">
          <input type="hidden" name="total" id="total-form">
          <button type="submit" class="submit">Enviar pedido</button>
        </form>
        <div id="order-msg" class="muted" style="margin-top:6px"></div>
      </div>
    </section>
  </main>

  <footer>
    MES DEL EMBAJADOR <strong>CAFETERIA JUVENIL</strong>
  </footer>

  <script>
    // Carrito
    const cartEl=document.getElementById('cart');
    const subtotalEl=document.getElementById('subtotal');
    const totalEl=document.getElementById('total');
    const detalleFormEl=document.getElementById('detalle-form');
    const totalFormEl=document.getElementById('total-form');
    const cart=[];
    
    function formatQ(q){ return 'Q'+q.toFixed(2); }

    function renderCart(){
      cartEl.innerHTML='';
      if(cart.length===0){ cartEl.innerHTML='<p class="muted">A√±ade productos del men√∫.</p>'; }
      let subtotal=0;
      const detalle=[];
      cart.forEach((it,idx)=>{
        const row=document.createElement('div'); row.className='cart-row';
        row.innerHTML=`<span>${it.name} x${it.qty}</span><span>${formatQ(it.price*it.qty)} <button data-i="${idx}" class="btn-mini" style="margin-left:8px;">‚úñ</button></span>`;
        cartEl.appendChild(row); 
        subtotal+=it.price*it.qty;
        detalle.push(`${it.name} x${it.qty} - ${formatQ(it.price*it.qty)}`);
      });
      subtotalEl.textContent=formatQ(subtotal); totalEl.textContent=formatQ(subtotal);
      detalleFormEl.value=detalle.join('|');
      totalFormEl.value=subtotal.toFixed(2);
      cartEl.querySelectorAll('.btn-mini').forEach(btn=>btn.addEventListener('click',()=>{const i=parseInt(btn.dataset.i,10); cart.splice(i,1); renderCart();}));
    }

    // Agregar productos
    document.querySelectorAll('.add').forEach(btn=>{
      btn.onclick = ()=>{
        const q = btn.previousElementSibling;
        const qty = parseInt(q.value,10)||0;
        if(qty <= 0) return;
        const name = q.dataset.name;
        const price = parseFloat(q.dataset.price);
        const existing = cart.find(item=>item.name===name);
        if(existing){ existing.qty += qty; }
        else{ cart.push({name, price, qty}); }
        q.value=0;
        renderCart();
      }
    });

    // Formulario
    const orderForm=document.getElementById('order-form');
    const orderMsg=document.getElementById('order-msg');
    orderForm.addEventListener('submit', e=>{
      if(cart.length===0){ e.preventDefault(); orderMsg.textContent='Agrega productos al carrito.'; return; }
      if(!document.getElementById('customer').value.trim()){ e.preventDefault(); orderMsg.textContent='Escribe tu nombre.'; return; }
      orderMsg.textContent='Pedido enviado con √©xito.';
    });
  </script>
</body>
</html>
